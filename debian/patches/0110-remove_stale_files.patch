Description:    Remove stale files created by SCons when building Debian packages
Origin:         Debian
Bug-Debian:     http://bugs.debian.org/519948
Forwarded:      http://scons.tigris.org/issues/show_bug.cgi?id=1571

Index: trunk/engine/SCons/Script/Main.py
===================================================================
--- a/src/engine/SCons/Script/Main.py
+++ b/src/engine/SCons/Script/Main.py
@@ -1122,6 +1122,21 @@ def _main(parser):
             print('Found nothing to build')
             exit_status = 2
 
+        # Remove temporary files left by SCons
+        if options.clean:
+            if 'DH_INTERNAL_OPTIONS' in os.environ:
+                import shutil
+                for path in ('.sconsign.dblite', '.sconf_temp'):
+                    try:
+                        if os.path.isfile(path):
+                            print ('Removing autogenerated file %s' % (path))
+                            os.remove(path)
+                        if os.path.isdir(path):
+                            print ('Removing autogenerated directory %s' % (path))
+                            shutil.rmtree(path)
+                    except OSError:
+                        pass
+
 def _build_targets(fs, options, targets, target_top):
 
     global this_build_status
